{% extends 'base.html.twig' %}
{% block body %}
{% include "layouts/nav_head_produit.html.twig" %}
    <!-- Content Wrapper. Contains page content -->
    <div
        class="content-wrapper">

        <!-- Main content -->
        <section class="content">
			<br>
            <div
                class="container-fluid">
                <!-- Info boxes -->
                <div class="row">
                    <div class="col-12 col-sm-6 col-md-3"></div>
                    <!-- /.col -->

                </div>
                <!-- /.row -->
                <div class="row">
                    
                    <div class="col-md-12">

                        <div class="card">
                            <div class="card-header">
								<form action="{{ path('produit_nb') }}" method="post">
								<div class="form-inline">
									Nb Produits:
									<input type="number" name="nb_row" class="form-control" value="1">
									<button type="submit" class="btn btn-default">Ok</button>
								</div>
								</form>
                                
                            </div>
                            <!-- /.card-header -->
							<div class="card-header form-inline">
								<form action="{{path('produit_sessionCategorie')}}" method="post">
									Categorie:
									<select style="width:250px;" class="form-control" name="categorie" id="">
										{% for categorie in categories %}
										<option value="{{categorie.id}}">{{categorie.nomCat}}</option>
											
										{% else %}
										<option value="">Liste vide...</option>
										{% endfor %}
									</select>
									<button class="btn btn-default" type="submit">Ok</button>
								</form>
								<!--on affiche ici le nom de la famille qui est dans la session-->
								<div style="margin-left: 2%;">
									{% if app.session.get('categorie') %}
										Categorie en cours: <strong>{{nom_categorie}}</strong>
									{% else %}
										<h6>Aucune categorie choisie pour l'instant!</h6>
									{% endif %}
								</div>
							</div>
                            <div class="card-body table-responsive p-0" style="height: 360px;">
                                <form action="" method="post">
                                    <table class="table table-head-fixed text-nowrap">
                                        <tbody>
                                            <tr>
                                                <th>Nom</th>
												<th>Prix d'achat</th>
												<th>Unité d'achat</th>
                                                <th>Prix de vente</th>
												<th>Unité de vente</th>
                                            </tr>

											{% for nb_row in nb_rows %}
                                            <tr>
                                                <th>
                                                    <input type="text" name="produit{{nb_row}}" class="form-control" placeholder="Nom du produit" id="">
												</th>
                                                <th>
                                                    <input type="number" name="prix_achat{{nb_row}}" class="form-control" id="">
                                                
												</th>
												<th>
                                                    <select type="number" name="unite_achat{{nb_row}}" class="form-control" id="">
                                                        {% for row in unites %}
                                                            {% if row.id %}
                                                            <option value="{{row.id}}">{{row.nomuval}}</option>
                                                            {% else %}
                                                            <option value="">Liste vide...</option>
                                                            {% endif %}
                                                        {% endfor %}
                                                    </select>
												</th>
												<th>
                                                    <input type="number" name="prix_vente{{nb_row}}" class="form-control" id="">
                                                        
												</th>
												<th>
                                                    <select type="number" name="unite_vente{{nb_row}}" class="form-control" id="">
                                                        {% for row in unites %}
                                                            {% if row.id %}
                                                            <option value="{{row.id}}">{{row.nomuval}}</option>
                                                            {% else %}
                                                            <option value="">Liste vide...</option>
                                                            {% endif %}
                                                        {% endfor %}
                                                    </select>
												</th>
							
                                            </tr>
												
											{% endfor %}
												
											
                                        </tbody>
										<!-- /.tbody -->
                                    </table>
                                <!-- /.form -->

								</div>
								<!-- /.card-body -->
								{% if app.session.get('categorie') %}
								<button type="submit" name="enregistrer" class="btn btn-success form-control offset-1 col-10">Enregistrer</button>
								{% else %}
								{% endif %}
								<br><br>
                                </form>
                                </div>

                            </div>


                        </div>
                        <!-- /.card -->

                    </div>
                    <!-- /.col -->


                </div>
					
                <!-- /.row -->
            </div>

        </section>
    </div>
{% endblock %}
